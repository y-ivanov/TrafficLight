<!DOCTYPE html>
<html>
<head>
	<title>TrafficLight</title>
	<link rel="stylesheet" type="text/css" href="TrafficLight.css">
	<script type="text/javascript" src="jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="jquery.countdown.min.js"></script>
</head>
<body>
<div class="border">
	<div class="red" id="red"></div>
	<div class="orange" id="orange"></div>
	<div class="green" id="green"></div>
</div>
<input type="button" name="click" id="start" value="Start">
<div id="getting-started"></div>
<script type="text/javascript">
var speed = 100;
var globaltimer = 10;
var timer = globaltimer
$('#start').click(redInterval);
function redInterval() {
	timer = globaltimer
	$('#red').css('opacity','1');
	$('#orange').css('background-color', '#594d00')
	$('#orange').css('color', '#ff0000');
	$('#green').css('opacity', '0.3')
	var thisInterval = setInterval(function() {
	$('#orange').text(timer);
	console.log(timer);
	if (timer != 0){
  		timer--;
  	}
  	else{
  		clearInterval(thisInterval);
  		$('#red').css('opacity', '1')
  		window.setTimeout(orangeLight,speed*10);
  		window.setTimeout(greenInterval, speed*30)
  	}
}, speed*10)
};
function orangeLight() {
	$('#orange').css('opacity','1');
	$('#orange').css('background-color', '#ffc300');
	$('#orange').text('');
};

function greenInterval() {
	timer = globaltimer
	$('#red').css('opacity','0.3');
	$('#orange').css('background-color', '#594d00')
	$('#orange').css('color', '#4cff00');
	$('#green').css('opacity', '1')
	var thisInterval = setInterval(function() {
	$('#orange').text(timer);
	console.log(timer);
	if (timer < 4) {
		setTimeout(function() {$('#green').css('opacity', '0.5');}, speed*5)
		$('#green').css('opacity', '1')
	}
	if (timer != 0){
  		timer--;
  	}
  	else{
  		clearInterval(thisInterval);
  		window.setTimeout(orangeLight,speed*10);
  		window.setTimeout(redInterval, speed*30)
  	}
  	
}, speed*10)
};
</script>
</body>
</html>